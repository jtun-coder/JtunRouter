import{_ as J,k as g,X as W,a4 as q,F as G,o as b,g as k,s as t,x as d,p as l,w as o,J as R,Y as X,c as Y,q as m,a6 as u}from"./index-CCLY6QsW.js";import{E as j}from"./el-dialog-C8XF2JDe.js";import"./el-overlay-89ZHhflZ.js";import{s as z}from"./selectBox-03onemMs.js";import{E as K}from"./el-switch-BTV1w9Lp.js";import{E as Z,a as ee}from"./el-col-BkR5g-BW.js";import{k as te,l as se,p as I}from"./index-CSuQBRO8.js";import"./index-z4wGpwji.js";import"./index-82_0c4AB.js";import"./aria-BUADUvnR.js";import"./index-APFVxEOi.js";import"./index-vNULV4St.js";import"./openDownLoad-DhbK9y2K.js";/* empty css                                                                  */import"./constants-pKhjEyna.js";import"./use-form-item-BXSSCJ3O.js";import"./typescript-Bp3YSIOJ.js";import"./request-kOUjDz9H.js";const le={class:"OnlineClient"},oe={class:"OnlineClientTop"},ae={class:"OnlineHeader"},de={class:"headerLeft"},ne={class:"headerDesc"},ie={class:"selectForm"},ce={class:"OnlineBody"},re={style:{padding:"0 24px",background:"#FCFCFC","border-top-left-radius":"16px","border-top-right-radius":"16px"}},me={class:"topBox"},ue={class:"topBox"},pe={class:"topBox"},ve={class:"topBox"},_e={class:"topBox"},fe={class:"topBox"},ge={class:"topBox"},xe={class:"topBox"},he={class:"tableBody"},ye={class:"statusBox"},we={class:"statusBox"},be={class:"statusBox"},Be={class:"statusBox"},Pe={class:"statusBox"},$e={class:"statusBox"},ke={class:"statusBox"},Ie={class:"actionBox"},Ce=["onClick"],Se=["onClick"],De={class:"maskContent"},Ee={class:"maskTitle"},Ve={class:"maskItem"},Ue={class:"maskLabel"},Le={class:"topBox"},Te=["placeholder"],Ne={class:"maskItem"},Oe={class:"maskLabel"},Fe={class:"topBox"},He={class:"maskItem"},Me={class:"maskLabel"},Ae={class:"topBox"},Qe=["placeholder"],Je={class:"maskItem"},We={class:"maskLabel"},qe={class:"topBox topBoxA"},Ge=["placeholder"],Re=["placeholder"],Xe={class:"maskItem"},Ye={class:"maskLabel"},je={class:"maskItem"},ze={class:"maskLabel"},Ke={class:"topBox"},Ze=["readonly","placeholder"],et={class:"maskItem"},tt={class:"maskLabel"},st={class:"topBox topBoxA"},lt=["placeholder"],ot=["placeholder"],at={class:"footerBox"},dt={__name:"VirtualServer",setup(nt){let C=g("");const{t:x}=W(),S=q();C.value=S.globalData.logon_pwd;let p=[],v=[],_=[];const h=g([]),D=["TCP/UDP","TCP","UDP"],n=g({cmd:135,logon_pwd:"",name:"",protocol:"TCP/UDP",remoteHost:"",wanPortStart:"",wanPortEnd:"",lanPortStart:"",lanPortEnd:"",deviceName:"",deviceIp:"",enabled:1,flag:!1}),y=g([]),r=g(!1),E=e=>{n.value.protocol=e.data},V=e=>{n.value.deviceName=e.data;let a=y.value;for(let s in a)console.log(a[s]==e.data,a[s].deviceName,e.data),a[s]==e.data&&(console.log(a[s],_),n.value.deviceIp=_[s])};async function B(){var e={cmd:215,logon_pwd:localStorage.getItem("psd")},a=await se(e);a.code==200&&(p=a.conn_dev,U())}function U(){v=[],_=[];for(let e=0;e<p.length;e++)p[e].name==""?v[e]=x("public.device"):v[e]=p[e].name,_[e]=p[e].ipv4;v.splice(0,0,x("public.device")),_.splice(0,0,""),y.value=v,n.value.deviceName=x("public.device"),r.value=!0}async function w(){let e={cmd:134,logon_pwd:localStorage.getItem("psd")},a=await te(e);if(a.code==200)if(a.virtual_server.list=="")h.value=[];else{let s=a.virtual_server.list;for(let c in s)s[c].flag=s[c].enabled==1;h.value=s}}const L=()=>{n.value={cmd:135,logon_pwd:"",name:"",protocol:"TCP/UDP",remoteHost:"",wanPortStart:"",wanPortEnd:"",lanPortStart:"",lanPortEnd:"",deviceName:"",deviceIp:"",enabled:1,flag:!1},B()},T=async e=>{let a=e.id,s={cmd:136,logon_pwd:localStorage.getItem("psd"),id:a};(await I(s)).code==200&&setTimeout(()=>{w()},1500)},N=e=>{e.flag=e.enabled==1,n.value=e,B()},O=(e,a)=>{e==!1?a.enabled=0:a.enabled=1,n.value=a,P()},P=async()=>{n.value.logon_pwd=localStorage.getItem("psd"),n.value.id?n.value.cmd=137:n.value.cmd=135,console.log(n.value),(await I(n.value)).code==200&&setTimeout(()=>{w()},1500),r.value=!1},F=()=>{r.value=!r.value},H=()=>navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return G(()=>{w()}),(e,a)=>{const s=ee,c=Z,M=K,$=z,A=j;return b(),k("div",null,[t("div",le,[t("div",oe,[t("div",ae,[t("div",de,d(e.$t("system.virtual")),1),t("div",ne,d(e.$t("system.descD")),1)]),t("div",ie,[t("div",{class:"addBtn",onClick:L},d(e.$t("system.add")),1)]),t("div",ce,[t("div",re,[l(c,{gutter:24},{default:o(()=>[l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",me,d(e.$t("system.name")),1)]),_:1}),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",ue,d(e.$t("system.remote")),1)]),_:1}),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",pe,d(e.$t("system.wanPort")),1)]),_:1}),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",ve,d(e.$t("system.lanIP")),1)]),_:1}),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",_e,d(e.$t("system.lanPort")),1)]),_:1}),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",fe,d(e.$t("system.protocol")),1)]),_:1}),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",ge,d(e.$t("system.status")),1)]),_:1}),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",xe,d(e.$t("system.action")),1)]),_:1})]),_:1})]),t("div",he,[(b(!0),k(R,null,X(h.value,(i,Q)=>(b(),Y(c,{key:Q,gutter:24},{default:o(()=>[l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",ye,d(i.name),1)]),_:2},1024),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",we,d(i.remoteHost),1)]),_:2},1024),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",be,d(i.wanPortStart)+"-"+d(i.wanPortEnd),1)]),_:2},1024),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",Be,d(i.deviceIp),1)]),_:2},1024),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",Pe,d(i.lanPortStart)+"-"+d(i.lanPortEnd),1)]),_:2},1024),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",$e,d(i.protocol),1)]),_:2},1024),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",ke,[l(M,{modelValue:i.flag,"onUpdate:modelValue":f=>i.flag=f,style:{width:"43px"},onChange:f=>O(f,i)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:2},1024),l(s,{lg:3,md:24,sm:24,xl:3,xs:24},{default:o(()=>[t("div",Ie,[t("div",{class:"editText",onClick:f=>N(i)},d(e.$t("system.edit")),9,Ce),t("div",{class:"delText",onClick:f=>T(i)},d(e.$t("system.delete")),9,Se)])]),_:2},1024)]),_:2},1024))),128))])])])]),l(A,{modelValue:r.value,"onUpdate:modelValue":a[8]||(a[8]=i=>r.value=i),"before-close":F,"show-close":!1,width:H()?"90%":"30%"},{footer:o(()=>[t("div",at,[t("div",{class:"btnBoxCancel",onClick:a[7]||(a[7]=i=>r.value=!1)},d(e.$t("system.cancel")),1),t("div",{class:"btnBoxConfirm",onClick:P},d(e.$t("system.save")),1)])]),default:o(()=>[t("div",De,[t("div",Ee,d(e.$t("system.addService")),1),t("div",Ve,[l(c,{gutter:24,style:{width:"100%"}},{default:o(()=>[l(s,{lg:8,md:24,sm:24,xl:8,xs:24},{default:o(()=>[t("div",Ue,d(e.$t("system.name")),1)]),_:1}),l(s,{lg:16,md:24,sm:24,xl:16,xs:24},{default:o(()=>[t("div",Le,[m(t("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>n.value.name=i),placeholder:e.$t("public.text"),type:"text"},null,8,Te),[[u,n.value.name]])])]),_:1})]),_:1})]),t("div",Ne,[l(c,{gutter:24,style:{width:"100%"}},{default:o(()=>[l(s,{lg:8,md:24,sm:24,xl:8,xs:24},{default:o(()=>[t("div",Oe,d(e.$t("system.protocol")),1)]),_:1}),l(s,{lg:16,md:24,sm:24,xl:16,xs:24},{default:o(()=>[t("div",Fe,[l($,{options:D,selectData:n.value.protocol,onUpdate:E},null,8,["selectData"])])]),_:1})]),_:1})]),t("div",He,[l(c,{gutter:24,style:{width:"100%"}},{default:o(()=>[l(s,{lg:8,md:24,sm:24,xl:8,xs:24},{default:o(()=>[t("div",Me,d(e.$t("system.remote")),1)]),_:1}),l(s,{lg:16,md:24,sm:24,xl:16,xs:24},{default:o(()=>[t("div",Ae,[m(t("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>n.value.remoteHost=i),placeholder:e.$t("public.text"),type:"text"},null,8,Qe),[[u,n.value.remoteHost]])])]),_:1})]),_:1})]),t("div",Je,[l(c,{gutter:24,style:{width:"100%"}},{default:o(()=>[l(s,{lg:8,md:24,sm:24,xl:8,xs:24},{default:o(()=>[t("div",We,d(e.$t("system.wanPort")),1)]),_:1}),l(s,{lg:16,md:24,sm:24,xl:16,xs:24},{default:o(()=>[t("div",qe,[m(t("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>n.value.wanPortStart=i),class:"num",placeholder:e.$t("public.text"),type:"text"},null,8,Ge),[[u,n.value.wanPortStart]]),m(t("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>n.value.wanPortEnd=i),class:"num",placeholder:e.$t("public.text"),type:"text"},null,8,Re),[[u,n.value.wanPortEnd]])])]),_:1})]),_:1})]),t("div",Xe,[l(c,{gutter:24,style:{width:"100%"}},{default:o(()=>[l(s,{lg:8,md:24,sm:24,xl:8,xs:24},{default:o(()=>[t("div",Ye,d(e.$t("system.device")),1)]),_:1}),l(s,{lg:16,md:24,sm:24,xl:16,xs:24},{default:o(()=>[l($,{options:y.value,selectData:n.value.deviceName,onUpdate:V},null,8,["options","selectData"])]),_:1})]),_:1})]),t("div",je,[l(c,{gutter:24,style:{width:"100%"}},{default:o(()=>[l(s,{lg:8,md:24,sm:24,xl:8,xs:24},{default:o(()=>[t("div",ze,d(e.$t("system.lanIP")),1)]),_:1}),l(s,{lg:16,md:24,sm:24,xl:16,xs:24},{default:o(()=>[t("div",Ke,[m(t("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>n.value.deviceIp=i),readonly:n.value.deviceName!=e.$t("public.device"),placeholder:e.$t("public.text"),type:"text"},null,8,Ze),[[u,n.value.deviceIp]])])]),_:1})]),_:1})]),t("div",et,[l(c,{gutter:24,style:{width:"100%"}},{default:o(()=>[l(s,{lg:8,md:24,sm:24,xl:8,xs:24},{default:o(()=>[t("div",tt,d(e.$t("system.lanPort")),1)]),_:1}),l(s,{lg:16,md:24,sm:24,xl:16,xs:24},{default:o(()=>[t("div",st,[m(t("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>n.value.lanPortStart=i),class:"num",placeholder:e.$t("public.text"),type:"text"},null,8,lt),[[u,n.value.lanPortStart]]),m(t("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>n.value.lanPortEnd=i),class:"num",placeholder:e.$t("public.text"),type:"text"},null,8,ot),[[u,n.value.lanPortEnd]])])]),_:1})]),_:1})])])]),_:1},8,["modelValue","width"])])}}},kt=J(dt,[["__scopeId","data-v-fa4d5b8b"]]);export{kt as default};
