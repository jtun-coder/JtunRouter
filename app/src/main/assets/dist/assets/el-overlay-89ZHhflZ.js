import{ab as M,ac as k,Z as J,u as R,f as N,ad as z,D as B,ae as Q,af as O,j as L,M as C,d as h,p as F,r as w,H as ee,ag as oe,A as ne,ah as te,k as E,ai as se,P as le,F as ae,aj as ue,K as _}from"./index-CCLY6QsW.js";import{t as ie,i as re,U,u as Y}from"./index-APFVxEOi.js";import{h as H,j as de,b as ce,r as fe,a as ye}from"./index-82_0c4AB.js";import{g as me,i as ve}from"./index-z4wGpwji.js";var p=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(p||{});const D=e=>{const n=M(e)?e:[e],t=[];return n.forEach(o=>{var s;M(o)?t.push(...D(o)):k(o)&&M(o.children)?t.push(...D(o.children)):(t.push(o),k(o)&&((s=o.component)!=null&&s.subTree)&&t.push(...D(o.component.subTree)))}),t},Ee=(e,n={})=>{J(e)||ie("[useLockscreen]","You need to pass a ref param to this function");const t=n.ns||R("popup"),o=N(()=>t.bm("parent","hidden"));if(!z||H(document.body,o.value))return;let s=0,u=!1,l="0";const d=()=>{setTimeout(()=>{fe(document==null?void 0:document.body,o.value),u&&document&&(document.body.style.width=l)},200)};B(e,c=>{if(!c){d();return}u=!H(document.body,o.value),u&&(l=document.body.style.width),s=me(t.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=de(document.body,"overflowY");s>0&&(i||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${s}px)`),ce(document.body,o.value)}),Q(()=>d())},pe=e=>{if(!e)return{onClick:O,onMousedown:O,onMouseup:O};let n=!1,t=!1;return{onClick:l=>{n&&t&&e(l),n=t=!1},onMousedown:l=>{n=l.target===l.currentTarget},onMouseup:l=>{t=l.target===l.currentTarget}}},Ce=L({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:C([String,Array,Object])},zIndex:{type:C([String,Number])}}),Te={click:e=>e instanceof MouseEvent},Se="overlay";var be=h({name:"ElOverlay",props:Ce,emits:Te,setup(e,{slots:n,emit:t}){const o=R(Se),s=c=>{t("click",c)},{onClick:u,onMousedown:l,onMouseup:d}=pe(e.customMaskEvent?void 0:s);return()=>e.mask?F("div",{class:[o.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:l,onMouseup:d},[w(n,"default")],p.STYLE|p.CLASS|p.PROPS,["onClick","onMouseup","onMousedown"]):ee("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[w(n,"default")])}});const Be=be,Ae=L({center:Boolean,alignCenter:Boolean,closeIcon:{type:re},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Le={close:()=>!0},xe=L({...Ae,appendToBody:Boolean,appendTo:{type:C([String,Object]),default:"body"},beforeClose:{type:C(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Ie={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[U]:e=>oe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ke=(e,n)=>{var t;const s=ne().emit,{nextZIndex:u}=te();let l="";const d=Y(),c=Y(),i=E(!1),f=E(!1),v=E(!1),T=E((t=e.zIndex)!=null?t:u());let y,m;const V=se("namespace",ue),G=N(()=>{const a={},r=`--${V.value}-dialog`;return e.fullscreen||(e.top&&(a[`${r}-margin-top`]=e.top),e.width&&(a[`${r}-width`]=ye(e.width))),a}),K=N(()=>e.alignCenter?{display:"flex"}:{});function g(){s("opened")}function j(){s("closed"),s(U,!1),e.destroyOnClose&&(v.value=!1)}function $(){s("close")}function x(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=_(()=>I(),e.openDelay):I()}function S(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=_(()=>A(),e.closeDelay):A()}function b(){function a(r){r||(f.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(a):S()}function W(){e.closeOnClickModal&&b()}function I(){z&&(i.value=!0)}function A(){i.value=!1}function Z(){s("openAutoFocus")}function X(){s("closeAutoFocus")}function q(a){var r;((r=a.detail)==null?void 0:r.focusReason)==="pointer"&&a.preventDefault()}e.lockScroll&&Ee(i);function P(){e.closeOnPressEscape&&b()}return B(()=>e.modelValue,a=>{a?(f.value=!1,x(),v.value=!0,T.value=ve(e.zIndex)?u():T.value++,le(()=>{s("open"),n.value&&(n.value.scrollTop=0)})):i.value&&S()}),B(()=>e.fullscreen,a=>{n.value&&(a?(l=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=l)}),ae(()=>{e.modelValue&&(i.value=!0,v.value=!0,x())}),{afterEnter:g,afterLeave:j,beforeLeave:$,handleClose:b,onModalClick:W,close:S,doClose:A,onOpenAutoFocus:Z,onCloseAutoFocus:X,onCloseRequested:P,onFocusoutPrevented:q,titleId:d,bodyId:c,closed:f,style:G,overlayDialogStyle:K,rendered:v,visible:i,zIndex:T}};export{Be as E,Ie as a,Ae as b,Le as c,xe as d,pe as e,D as f,ke as u};
