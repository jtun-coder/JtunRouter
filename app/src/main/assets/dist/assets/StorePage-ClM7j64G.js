import{U as ke,n as we,I as ae,o as le,q as Ie,r as ye,t as $e,u as te,v as Ce,w as Ne,x as Le,y as Se,z as De,B as Ve,C as Ae,D as xe,E as Be,F as be,G as Te,H as Ue,J as Ee,K as Fe,L as Pe}from"./index-CcVygsTE.js";import{_ as O,f as Oe,D as ne,k as L,W as Re,a4 as j,C as G,F as z,a as d,o as _,g as k,s as e,x as l,p as r,w as c,J as Z,Y as J,c as M,q as ie,n as re,y as V,S as $,Z as R,a8 as P,X as Y,U as Me,G as ce,v as je,$ as se,a0 as oe,a6 as ze,a9 as ee,a3 as He}from"./index-X_y_Lweg.js";/* empty css                   */import{E as K}from"./el-dialog-8uJi_Sq2.js";import"./el-overlay-BbzQhQJ7.js";import{E as q}from"./el-button-7z0TFEZC.js";import{a as X,E as Q}from"./el-col-BD9sDvtY.js";import{E}from"./index-r5B_-fV1.js";import{v as We}from"./directive-ByWyyhHJ.js";import{E as de}from"./el-input-CNB75vlJ.js";import{E as pe}from"./el-switch-KfUhZLjF.js";import{E as qe}from"./el-checkbox-h2JTCBT1.js";import"./request-CUVclgT8.js";import"./index-DW-jbMBa.js";import"./index-Bh4Knf-X.js";import"./aria-BUADUvnR.js";import"./index-CQpVMKCZ.js";import"./index-D-QKPCnM.js";import"./use-form-item-En1b377h.js";import"./constants-C-bldqyn.js";import"./index-r5W6hzzQ.js";import"./typescript-Bp3YSIOJ.js";import"./index-C2mSDKPv.js";import"./isEqual-DcOtnrVm.js";const ue="/assets/submiting-B7ULOMtL.gif";function Ge(h){return{all:h=h||new Map,on:function(m,p){var i=h.get(m);i?i.push(p):h.set(m,[p])},off:function(m,p){var i=h.get(m);i&&(p?i.splice(i.indexOf(p)>>>0,1):h.set(m,[]))},emit:function(m,p){var i=h.get(m);i&&i.slice().map(function(w){w(p)}),(i=h.get("*"))&&i.slice().map(function(w){w(m,p)})}}}const F=Ge(),Ze={key:0,class:"Installed"},Je={class:"InstallList"},Ye={class:"installedLength"},Ke={class:"contentDataItem"},Xe={class:"ContentTop"},Qe={class:"LogoBlock"},et=["src"],tt={class:"Version"},st={class:"ItemDetail"},ot={class:"ItemNameBlock"},at={class:"ItemName"},lt={class:"versionName"},nt={class:"versionInfo"},it={class:"ContentBottom"},rt={class:"ButtonBlock"},ct=["onClick"],dt=["onClick"],pt=["onClick"],ut=["onClick"],_t={class:"InstallIng"},mt=["src"],vt={class:"stateTip"},ft={key:1},ht={key:2,class:"installOver"},gt={key:3,class:"installFailed"},kt={__name:"InStalled",props:{InstallAppList:Array,storeAppList:Array},setup(h){let m=h;const p=()=>{},i=Oe(()=>m.InstallAppList.map(s=>{const n=m.storeAppList.find(I=>I.pkg===s.packageName);return{...s,icon:n?n.icon:s.icon}}));ne(()=>m.InstallAppList,s=>{console.log(s)},{immediate:!0,deep:!0});let w=L(!0),S=Re();const N=j();let a=L(!1);const v=[{name:"Not DownLoaded"},{name:"DownLoading ..."},{name:"Download Completed"},{name:"Installing ..."},{name:"Install Completed"},{name:"Install Failed"}];let C=G({status:1,statusTip:"Not DownLoaded",progress:0});const D=s=>{console.log(s),w.value=!1,S.setHandleTwoPathName(s.name),F.emit("isShow",w.value),F.emit("installItem",s)},b=async s=>{try{(await ke({password:N.token,packageName:s.packageName})).code==0&&setTimeout(()=>{P.go(0)},1e3)}catch(n){console.log(n)}},T=async s=>{try{const n=await we({packageName:s.packageName,password:N.token});n.code==0||console.error("Error: ",n.message||"未知错误")}catch(n){console.log(n)}finally{setTimeout(()=>{D(s)},2e3)}},U=async s=>{a.value=!0;try{(await ae({password:N.token,url:s.updateData.link,appInfo:{packageName:s.updateData.pkg,canonicalName:s.updateData.startup,versionCode:s.updateData.v,versionName:s.updateData.ver,name:s.updateData.app,brief:s.updateData.brief}})).code==0?o(s.updateData.pkg):(E({message:"Failed to install",type:"error",duration:2e3}),a.value=!1)}catch{a.value=!1,E({message:"Failed to install",type:"error",duration:2e3})}},o=async s=>{const n=setInterval(async()=>{try{let I=await le({password:N.token,packageName:s});I.code==0?(C.status=I.data.status,C.statusTip=v[I.data.status].name,C.progress=(I.data.progress/I.data.total).toFixed(2)*100,(I.data.status==4||I.data.status==5)&&clearInterval(n)):(clearInterval(n),a.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),P.go(0))}catch{clearInterval(n),a.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),P.go(0)}},800)},u=()=>{a.value=!1,P.go(0)};return z(()=>{}),(s,n)=>{const I=X,A=Q,t=q,y=K,x=We;return d(w)?(_(),k("div",Ze,[e("div",Je,[e("div",Ye,l(s.$t("install.title")+"("+i.value.length+")"),1),r(A,{gutter:24,class:"contentData"},{default:c(()=>[(_(!0),k(Z,null,J(i.value,(f,H)=>(_(),M(I,{key:H,xs:24,sm:12,md:6,lg:6,xl:6},{default:c(()=>[ie((_(),k("div",Ke,[e("div",Xe,[e("div",Qe,[e("img",{class:"appIcon",src:f.icon,alt:""},null,8,et),e("div",tt,l("V"+f.versionName),1)]),e("div",st,[e("div",ot,[e("div",at,l(f.name),1),e("div",{class:re({ItemActive:!0,activeIcon:!!f.isRun})},null,2)]),e("div",lt,l(f.versionCode),1),e("div",nt,[e("span",null,l(f.brief),1)])])]),e("div",it,[e("div",rt,[f.isRun?(_(),k("div",{key:0,class:"DetailButton",onClick:W=>D(f)},l(s.$t("install.view")),9,ct)):(_(),k("div",{key:1,class:"open",onClick:W=>T(f)},l(s.$t("install.open")),9,dt)),f.update?(_(),k("div",{key:2,class:"Update",onClick:W=>U(f)},l(s.$t("install.update")),9,pt)):V("",!0),f.isRun?V("",!0):(_(),k("div",{key:3,class:"uninstall",onClick:W=>b(f)},l(s.$t("install.Uninstall")),9,ut))])])])),[[x,f.isLoading]])]),_:2},1024))),128))]),_:1})]),r(y,{modelValue:d(a),"onUpdate:modelValue":n[0]||(n[0]=f=>R(a)?a.value=f:a=f),"close-on-click-modal":!1,"before-close":p},{default:c(()=>[e("div",_t,[d(C).status<4?(_(),k("img",{key:0,src:d(ue),alt:""},null,8,mt)):V("",!0),e("div",vt,l(d(C).statusTip),1),d(C).status==1?(_(),k("div",ft,l(d(C).progress+"%"),1)):V("",!0),d(C).status==4?(_(),k("div",ht,[r(t,{type:"primary",onClick:u},{default:c(()=>[$("Ok")]),_:1})])):V("",!0),d(C).status==5?(_(),k("div",gt,[r(t,{type:"danger",onClick:u},{default:c(()=>[$("Ok")]),_:1})])):V("",!0)])]),_:1},8,["modelValue"])])):V("",!0)}}},wt=O(kt,[["__scopeId","data-v-d8e142e4"]]),It={key:0,class:"Uninstall"},yt={class:"UNInstallList"},$t={class:"installedLength"},Ct={class:"contentDataItem"},Nt={class:"ContentTop"},Lt={class:"LogoBlock"},St=["src"],Dt={class:"Version"},Vt={class:"ItemDetail"},At={class:"ItemNameBlock"},xt={class:"ItemName"},Bt={key:0,class:"Intalled"},bt={class:"versionName"},Tt={class:"versionInfo"},Ut={class:"ContentBottom"},Et={class:"ButtonBlock"},Ft=["onClick"],Pt={class:"InstallIng"},Ot=["src"],Rt={class:"stateTip"},Mt={key:1},jt={key:2,class:"installOver"},zt={key:3,class:"installFailed"},Ht={__name:"NotInStall",props:{StoreAppList:Array,count:Number},setup(h){const{t:m}=Y();let p=h;ne(()=>p.StoreAppList,o=>{console.log(o)},{immediate:!0,deep:!0});const i=Me();let w=L(!0);const S=j(),N=[{name:"NotDownLoaded"},{name:"DownLoading"},{name:"downCompleted"},{name:"Installing"},{name:"InstallCompleted"},{name:"InstallFailed"}];let a=L(!1),v=G({status:1,statusTip:"Not DownLoaded",progress:0});const C=()=>{},D=async o=>{a.value=!0;try{(await ae({password:S.token,url:o.link,appInfo:{packageName:o.pkg,canonicalName:o.startup,versionCode:o.v,versionName:o.ver,name:o.app,brief:o.brief}})).code==0?b(o.pkg):(E({message:"Failed to install",type:"error",duration:2e3}),a.value=!1)}catch{a.value=!1,E({message:"Failed to install",type:"error",duration:2e3})}},b=async o=>{const u=setInterval(async()=>{try{let s=await le({password:S.token,packageName:o});s.code==0?(v.status=s.data.status,v.statusTip=m("install."+N[s.data.status].name),v.progress=Math.round(s.data.progress/s.data.total*100),(s.data.status==4||s.data.status==5)&&clearInterval(u)):(clearInterval(u),a.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),i.go(0))}catch{clearInterval(u),a.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),i.go(0)}},800)},T=o=>{w.value=o},U=()=>{a.value=!1,i.go(0)};return z(()=>{F.on("isShow",T)}),ce(()=>{F.off("isShow",T)}),(o,u)=>{const s=X,n=Q,I=q,A=K;return d(w)?(_(),k("div",It,[e("div",yt,[e("div",$t,l(o.$t("install.Appstore")+"("+d(p).count+")"),1),r(n,{gutter:24,class:"contentData"},{default:c(()=>[(_(!0),k(Z,null,J(d(p).StoreAppList,(t,y)=>(_(),M(s,{key:y,xs:24,sm:12,md:6,lg:6,xl:6},{default:c(()=>[e("div",Ct,[e("div",Nt,[e("div",Lt,[e("img",{class:"appIcon",src:t.icon,alt:""},null,8,St),e("div",Dt,l("V"+t.ver),1)]),e("div",Vt,[e("div",At,[e("div",xt,l(t.app),1),t.install?(_(),k("div",Bt,l(o.$t("install.installed")),1)):V("",!0)]),e("div",bt,l(t.v),1),e("div",Tt,[e("span",null,l(t.brief),1)])])]),e("div",Ut,[e("div",Et,[e("div",{class:"installation",onClick:x=>D(t)},l(o.$t("install.Installation")),9,Ft)])])])]),_:2},1024))),128))]),_:1})]),r(A,{modelValue:d(a),"onUpdate:modelValue":u[0]||(u[0]=t=>R(a)?a.value=t:a=t),"close-on-click-modal":!1,"before-close":C},{default:c(()=>[e("div",Pt,[d(v).status<4?(_(),k("img",{key:0,src:d(ue),alt:""},null,8,Ot)):V("",!0),e("div",Rt,l(d(v).statusTip),1),d(v).status==1?(_(),k("div",Mt,l(d(v).progress+"%"),1)):V("",!0),d(v).status==4?(_(),k("div",jt,[r(I,{type:"primary",onClick:U},{default:c(()=>[$("Ok")]),_:1})])):V("",!0),d(v).status==5?(_(),k("div",zt,[r(I,{type:"danger",onClick:U},{default:c(()=>[$("Ok")]),_:1})])):V("",!0)])]),_:1},8,["modelValue"])])):V("",!0)}}},Wt=O(Ht,[["__scopeId","data-v-2e749745"]]),B=h=>(se("data-v-39baba85"),h=h(),oe(),h),qt={class:"UrlBlock"},Gt={class:"LeftUrl"},Zt=B(()=>e("div",{class:"urlDetail"},[e("span",null,"Support Vless/Vmess/Trojan/Hysteria2/Socks5 link import.")],-1)),Jt=B(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none"},[e("path",{d:"M12.5 22C18.0229 22 22.5 17.5229 22.5 12C22.5 6.47715 18.0229 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5229 6.97715 22 12.5 22Z",stroke:"#E12D2D","stroke-width":"2","stroke-linejoin":"round"}),e("path",{d:"M15.3284 9.17188L9.67151 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9.67163 9.17188L15.3285 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Yt={class:"SwitchBlock"},Kt={class:"switch"},Xt={class:"switchName"},Qt={class:"TurnON"},es={class:"LeftSpan"},ts={class:"RightSpan"},ss={class:"TipBottom"},os={key:0,class:"information"},as=B(()=>e("div",{class:"switchName"},"Information",-1)),ls={class:"BodyBlock"},ns={class:"InformationItem"},is=B(()=>e("div",{class:"ItemName"},"Remarks:",-1)),rs={class:"ItemValue"},cs={class:"InformationItem"},ds=B(()=>e("div",{class:"ItemName"},"Address:",-1)),ps={class:"ItemValue"},us={class:"InformationItem"},_s=B(()=>e("div",{class:"ItemName"},"Protocal:",-1)),ms={class:"ItemValue"},vs={class:"InformationItem"},fs=B(()=>e("div",{class:"ItemName"},"Port:",-1)),hs={class:"ItemValue"},gs={class:"InformationItem"},ks=B(()=>e("div",{class:"ItemName"},"IP Address:",-1)),ws={class:"ItemValue"},Is={class:"InformationItem"},ys=B(()=>e("div",{class:"ItemName"},"TCP Ping:",-1)),$s={class:"ItemValue"},Cs={class:"storeItem"},Ns=B(()=>e("div",{class:"storeItemTitle"},[e("div",{class:"storeItemName"},"Configuration")],-1)),Ls={key:0,class:"storeItemDetail"},Ss=["onClick"],Ds={class:"selectTip"},Vs={class:"SelectName"},As={class:"severName"},xs={class:"serverPort"},Bs={key:1,class:"noStoreNode"},bs=B(()=>e("p",null,"Please import your node connection",-1)),Ts=[bs],Us={class:"ImportBlock"},Es=B(()=>e("div",{class:"ImportTitle"},"Import Sharing URL",-1)),Fs={class:"ImportForm"},Ps=B(()=>e("div",{class:"ImportFormUrl"},"URL",-1)),Os={class:"dialog-footer"},Rs={__name:"V2rayPage",props:{packName:{type:String}},setup(h){const{t:m}=Y(),p=j();let i=L(!1),w=L(""),S=L(),N=L(!1),a=L("");const v=h,C=G([]);let D=L();const b=async t=>{if(t.guid!=D.value.guid)try{const y=await Ie({password:p.token,guid:t.guid});console.log(y),y.code==0&&setTimeout(()=>{u()},1e3)}catch(y){console.log(y)}},T=async t=>{try{(await Se({password:p.token,guid:t.guid})).code==0&&setTimeout(()=>{u()},1e3)}catch(y){console.log(y)}},U=()=>{i.value=!0},o=async()=>{try{const t=await ye({password:p.token,config:w.value});console.log(t),t.code==0&&u()}catch(t){console.log(t)}i.value=!1},u=async()=>{const t=await $e({password:p.token});console.log(t),S.value=t.data.isRunning,D.value=s(t.data.selected,t.data.list),C.splice(0,C.length,...t.data.list),console.log(C)},s=(t,y)=>{let x=y.findIndex(f=>f.guid==t);if(x!=-1)return y[x]},n=async()=>{try{const t=await te({packageName:v.packName,password:p.token});t.code==0?P.go(0):console.error("Error: ",t.message||"未知错误")}catch(t){console.log(t)}},I=async()=>{N.value=!0;try{let t;if(S.value){if(t=await Ce({password:p.token}),t.code==0)return u(),!0;throw new Error("Setting failed")}else{if(t=await Ne({password:p.token}),t.code===0)return!0;throw new Error("Setting failed")}}catch(t){return console.error(t),!1}finally{N.value=!1}},A=async()=>{try{const t=await Le({password:p.token});t.code==0&&(a.value=t.data)}catch(t){console.log(t)}};return z(()=>{u()}),(t,y)=>{const x=pe,f=X,H=Q,W=q,ve=de,fe=K;return _(),k("div",null,[e("div",qt,[e("div",Gt,[e("div",{class:"UrlImport",onClick:U},l(d(m)("v2ray.tip1")),1),Zt]),e("div",{class:"RightUrl",onClick:n},[Jt,$(" "+l(t.$t("install.CloseApp")),1)])]),e("div",Yt,[e("div",Kt,[e("div",Xt,l(t.$t("install.Switch")),1),e("div",Qt,[e("div",es,l(t.$t("install.onoroff")),1),e("div",ts,[r(x,{style:{"font-size":"22px"},modelValue:d(S),"onUpdate:modelValue":y[0]||(y[0]=g=>R(S)?S.value=g:S=g),"active-color":"#13ce66","inactive-color":"#ff4949",loading:d(N),"before-change":()=>I()},null,8,["modelValue","loading","before-change"])])]),e("div",ss,l(d(m)("v2ray.tip2")),1)]),d(S)?(_(),k("div",os,[e("div",{class:"TopBlock"},[as,e("div",{class:"conNectTest",onClick:A},"Connectivity Test")]),e("div",ls,[r(H,{gutter:24},{default:c(()=>[r(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c(()=>{var g;return[e("div",ns,[is,e("div",rs,l(((g=d(D))==null?void 0:g.profile.remarks)||""),1)])]}),_:1}),r(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c(()=>{var g;return[e("div",cs,[ds,e("div",ps,l(((g=d(D))==null?void 0:g.profile.server)||""),1)])]}),_:1})]),_:1}),r(H,{gutter:24},{default:c(()=>[r(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c(()=>{var g;return[e("div",us,[_s,e("div",ms,l(((g=d(D))==null?void 0:g.profile.configType)||""),1)])]}),_:1}),r(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c(()=>{var g;return[e("div",vs,[fs,e("div",hs,l(((g=d(D))==null?void 0:g.profile.serverPort)||""),1)])]}),_:1})]),_:1}),r(H,{gutter:24},{default:c(()=>[r(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c(()=>{var g;return[e("div",gs,[ks,e("div",ws,l(((g=d(D))==null?void 0:g.profile.server)||""),1)])]}),_:1}),r(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c(()=>[e("div",Is,[ys,e("div",$s,l(d(a)==-1?"TimeOut":d(a)),1)])]),_:1})]),_:1})])])):V("",!0)]),e("div",Cs,[Ns,C.length>0?(_(),k("div",Ls,[(_(!0),k(Z,null,J(C,(g,he)=>(_(),k("div",{key:he,onClick:ge=>b(g),class:"storeItemLink"},[e("div",Ds,[e("div",{class:re(["selectTipInside",{active:g.guid==d(D).guid}])},null,2)]),e("div",Vs,[e("div",As,l(g.profile.server),1),e("div",xs,l("severPort:"+g.profile.serverPort),1)]),r(W,{class:"DeleteButton",disabled:g.guid===d(D).guid,onClick:je(ge=>T(g),["stop"])},{default:c(()=>[$("Delete")]),_:2},1032,["disabled","onClick"])],8,Ss))),128))])):(_(),k("div",Bs,Ts))]),r(fe,{class:"ImportDialog",modelValue:d(i),"onUpdate:modelValue":y[4]||(y[4]=g=>R(i)?i.value=g:i=g),"destroy-on-close":"",center:""},{footer:c(()=>[e("div",Os,[e("div",{class:"cancelButton",onClick:y[2]||(y[2]=g=>R(i)?i.value=!1:i=!1)},"Cancel"),e("div",{class:"ImportButton",onClick:y[3]||(y[3]=g=>o())},"Import")])]),default:c(()=>[e("div",Us,[Es,e("div",Fs,[Ps,r(ve,{class:"ImportFormInput",type:"text",placeholder:"请输入内容",modelValue:d(w),"onUpdate:modelValue":y[1]||(y[1]=g=>R(w)?w.value=g:w=g)},null,8,["modelValue"])])])]),_:1},8,["modelValue"])])}}},Ms=O(Rs,[["__scopeId","data-v-39baba85"]]),_e=h=>(se("data-v-7e6a77e2"),h=h(),oe(),h),js={class:"UrlBlock"},zs=_e(()=>e("div",{class:"LeftUrl"},null,-1)),Hs=_e(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none"},[e("path",{d:"M12.5 22C18.0229 22 22.5 17.5229 22.5 12C22.5 6.47715 18.0229 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5229 6.97715 22 12.5 22Z",stroke:"#E12D2D","stroke-width":"2","stroke-linejoin":"round"}),e("path",{d:"M15.3284 9.17188L9.67151 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9.67163 9.17188L15.3285 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Ws={class:"SwitchBlock"},qs={class:"switch"},Gs={class:"switchName"},Zs={class:"TurnON"},Js={class:"LeftSpan"},Ys={class:"RightSpan"},Ks={class:"TipBottom"},Xs={key:0,style:{width:"100%",height:"50px","margin-top":"30px"}},Qs={style:{width:"100%",height:"100%","margin-top":"20px"}},eo={__name:"AListLite",props:{packName:{type:String}},setup(h){const{t:m}=Y(),p=j(),i=L(null),w=L(!1),S=h,N=L("");let a=L(!1);const v=L(),C=async()=>{try{const n=await De({password:p.token});n.code==0&&(v.value=n.data)}catch(n){console.log(n)}},D=window.location.port;let b="";D=="2000"?b=`${window.location.hostname+":5244"}`:D=="8080"&&(b=`${window.location.hostname.replace(/^(.*?)(\..*)$/,"$1-alist$2")+":8080"}`),console.log(b);const T="http://"+b,U=async()=>{try{const n=await Ve({password:p.token,adminPass:N.value});console.log(n),n.code==0&&(w.value=!1,E.success(m("AListLite.passsuc")))}catch(n){console.log(n)}},o=()=>{i.value&&i.value.contentWindow&&i.value.contentWindow.document.querySelectorAll(".hope-c-PJLV-iekLzst-css").forEach(A=>{A.style.display="none"})},u=async()=>{console.log(S.packName);try{const n=await te({packageName:S.packName,password:p.token});n.code==0?P.go(0):console.error("Error: ",n.message||"未知错误")}catch(n){console.log(n)}},s=async()=>{a.value=!0;try{let n;if(v.value){if(n=await Ae({password:p.token}),n.code==0)return C(),!0;throw new Error("Setting failed")}else{if(n=await xe({password:p.token}),n.code===0)return C(),!0;throw new Error("Setting failed")}}catch(n){return console.error(n),!1}finally{a.value=!1}};return z(()=>{C(),i.value&&i.value.contentWindow&&o()}),(n,I)=>{const A=pe,t=q,y=de,x=K;return _(),k("div",null,[e("div",js,[zs,e("div",{class:"RightUrl",onClick:u},[Hs,$(" "+l(n.$t("install.CloseApp")),1)])]),e("div",Ws,[e("div",qs,[e("div",Gs,l(n.$t("install.Switch")),1),e("div",Zs,[e("div",Js,l(n.$t("install.onoroff")),1),e("div",Ys,[r(A,{style:{"font-size":"22px"},modelValue:v.value,"onUpdate:modelValue":I[0]||(I[0]=f=>v.value=f),"active-color":"#13ce66","inactive-color":"#ff4949",loading:d(a),"before-change":()=>s()},null,8,["modelValue","loading","before-change"])])]),e("div",Ks,l(d(m)("AListLite.tip1")),1)])]),v.value?(_(),k("div",Xs,[r(t,{type:"primary",style:{height:"56px","font-size":"24px"},onClick:I[1]||(I[1]=f=>w.value=!0)},{default:c(()=>[$(l(d(m)("AListLite.pass")),1)]),_:1})])):V("",!0),e("div",Qs,[e("iframe",{ref_key:"myIframe",ref:i,style:{width:"100%",height:"500px","border-radius":"12px"},src:T,frameborder:"0"},null,512)]),r(x,{modelValue:w.value,"onUpdate:modelValue":I[3]||(I[3]=f=>w.value=f),style:{"border-radius":"10px",height:"200px"},width:"500"},{default:c(()=>[e("h2",null,l(d(m)("AListLite.pass")),1),r(y,{type:"password",style:{height:"48px"},modelValue:N.value,"onUpdate:modelValue":I[2]||(I[2]=f=>N.value=f),placeholder:"New Password"},null,8,["modelValue"]),r(t,{type:"primary",style:{"margin-top":"10px"},onClick:U},{default:c(()=>[$("确定")]),_:1})]),_:1},8,["modelValue"])])}}},to=O(eo,[["__scopeId","data-v-7e6a77e2"]]),me=h=>(se("data-v-0af39c25"),h=h(),oe(),h),so={class:"UrlBlock"},oo=me(()=>e("div",{class:"LeftUrl"},[e("div",{class:"urlDetail"},[e("span")])],-1)),ao=me(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none"},[e("path",{d:"M12.5 22C18.0229 22 22.5 17.5229 22.5 12C22.5 6.47715 18.0229 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5229 6.97715 22 12.5 22Z",stroke:"#E12D2D","stroke-width":"2","stroke-linejoin":"round"}),e("path",{d:"M15.3284 9.17188L9.67151 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9.67163 9.17188L15.3285 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),lo={class:"SwitchBlock"},no={class:"switch"},io={class:"switchName"},ro={class:"TurnON"},co={class:"SwitchBlock"},po={class:"switch"},uo={class:"switchName"},_o={class:"upload"},mo={class:"Importconfig"},vo={class:"UpFile"},fo={__name:"OpenVpn",props:{packName:{type:String}},setup(h){Y();const m=j(),p=L(""),i=L(""),w=h,S=()=>{document.getElementById("fileInput").click()},N=G([]),a=async()=>{try{const o=await Be({password:m.token});o.code==0&&N.splice(0,N.length,...o.data)}catch(o){console.log(o)}},v=o=>{const u=o.target.files[0];if(console.log(u),u){i.value=u.name;const s=new FileReader;s.onloadend=()=>{p.value=s.result.split(",")[1],console.log(p.value)},s.readAsDataURL(u)}},C=async()=>{if(p.value)try{(await be({password:m.token,config:p.value,name:i.value})).code==0&&(i.value="",p.value="",a())}catch(o){console.log(o)}},D=async o=>{try{(await Te({password:m.token,uuid:o})).code==0&&setTimeout(()=>{a()},1600)}catch(u){console.log(u)}},b=async o=>{try{(await Ue({password:m.token,uuid:o})).code==0&&setTimeout(()=>{a()},1600)}catch(u){console.log(u)}},T=async()=>{try{const o=await te({packageName:w.packName,password:m.token});o.code==0?P.go(0):console.error("Error: ",o.message||"未知错误")}catch(o){console.log(o)}},U=async o=>{try{(await Ee({password:m.token,uuid:o})).code==0&&setTimeout(()=>{a()},1600)}catch(u){console.log(u)}};return z(()=>{a()}),(o,u)=>{const s=X,n=Q,I=qe,A=q;return _(),k("div",null,[e("div",so,[oo,e("div",{class:"RightUrl",onClick:T},[ao,$(" "+l(o.$t("install.CloseApp")),1)])]),e("div",lo,[e("div",no,[e("div",io,l(o.$t("install.openvpninstance")),1),e("div",ro,[r(n,{gutter:0,style:{width:"100%"},class:"TurnHead"},{default:c(()=>[r(s,{xs:4,sm:4,md:4,lg:4,xl:4},{default:c(()=>[$(l(o.$t("install.name")),1)]),_:1}),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[$(l(o.$t("install.enabled")),1)]),_:1}),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[$(l(o.$t("install.started")),1)]),_:1}),r(s,{xs:4,sm:4,md:4,lg:4,xl:4},{default:c(()=>[$(l(o.$t("install.startorstop")),1)]),_:1}),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[$(l(o.$t("install.port")),1)]),_:1}),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[$(l(o.$t("install.ProtocolName")),1)]),_:1}),r(s,{xs:4,sm:4,md:4,lg:4,xl:4},{default:c(()=>[$("    "+l(o.$t("install.actions")),1)]),_:1})]),_:1}),(_(!0),k(Z,null,J(N,(t,y)=>(_(),M(n,{gutter:0,key:y,class:"TurnItem"},{default:c(()=>[r(s,{xs:4,sm:4,md:4,lg:4,xl:4,class:"spanName"},{default:c(()=>[$(l(t.name),1)]),_:2},1024),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[r(I,{modelValue:t.servers[0].enabled,"onUpdate:modelValue":x=>t.servers[0].enabled=x,size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[$(l(t.active==!0?"Yes":"No"),1)]),_:2},1024),r(s,{xs:4,sm:4,md:4,lg:4,xl:4},{default:c(()=>[t.active==!1?(_(),M(A,{key:0,class:"StartButton",onClick:u[0]||(u[0]=x=>D(o.itqem.uuid))},{default:c(()=>[$("Start")]),_:1})):(_(),M(A,{key:1,class:"StopButton",onClick:x=>b(t.uuid)},{default:c(()=>[$("Stop")]),_:2},1032,["onClick"]))]),_:2},1024),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[$(l(t.servers[0].port),1)]),_:2},1024),r(s,{xs:3,sm:3,md:3,lg:3,xl:3},{default:c(()=>[$(l(t.servers[0].useUdp==!0?"UDP":"-"),1)]),_:2},1024),r(s,{xs:4,sm:4,md:4,lg:4,xl:4},{default:c(()=>[r(A,{disabled:t.active,class:"DeleteButton",onClick:x=>U(t.uuid)},{default:c(()=>[$("Delete")]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])])]),e("div",co,[e("div",po,[e("div",uo,l(o.$t("install.uploadfile")),1),e("div",_o,[e("input",{style:{display:"none"},type:"file",id:"fileInput",onChange:v,accept:".ovpn"},null,32),e("div",mo,[ie(e("input",{type:"text",disabled:"",class:"configName","onUpdate:modelValue":u[1]||(u[1]=t=>i.value=t)},null,512),[[ze,i.value]]),r(A,{class:"ImportConfigButton",onClick:S},{default:c(()=>[$(l(o.$t("install.SelectFileupload")),1)]),_:1})]),e("div",vo,[r(A,{class:"UploadButton",onClick:u[2]||(u[2]=t=>C())},{default:c(()=>[$(l(o.$t("install.uploadfiles")),1)]),_:1})])])])])])}}},ho=O(fo,[["__scopeId","data-v-0af39c25"]]),go={key:0,class:"storeItem"},ko={key:1},wo={__name:"InstallDetaIl",setup(h){const m=L(null);let p=L(!0);const i=a=>{m.value=a,N.value=S[a.name]},w=a=>{p.value=a},S={v2rayNG:ee(Ms),AListLite:ee(to),OpenVPN:ee(ho)};let N=L();return z(()=>{F.on("isShow",w),F.on("installItem",i)}),ce(()=>{F.off("isShow",w),F.off("installItem",i)}),(a,v)=>d(p)?V("",!0):(_(),k("div",go,[e("div",null,[m.value?(_(),M(He(d(N)),{key:0,packName:m.value.packageName},null,8,["packName"])):(_(),k("p",ko,"请等待安装项加载..."))])]))}},Io=O(wo,[["__scopeId","data-v-d9783964"]]),yo={class:"storePage"},$o={__name:"StorePage",setup(h){const m=j();let p=L([]),i=L([]),w=L(0);const S=async()=>{try{const a=await Fe({password:m.token});if(a.code==0)p.value=a.data;else{console.error("Failed to fetch installed app list with code:",a.code);return}const v=await Pe();if(v.data.code==0)i.value=v.data.rows,w.value=v.data.count;else{console.error("Failed to fetch store app list with code:",v.data.code);return}N()}catch(a){console.error("Error fetching app lists:",a)}},N=()=>{p.value.forEach(a=>{const v=i.value.find(C=>C.pkg===a.packageName);v&&v.v>a.versionCode?(a.update=!0,a.updateData=v):a.update=!1}),i.value.forEach(a=>{a.install=p.value.some(v=>v.packageName===a.pkg)})};return S(),(a,v)=>(_(),k("div",yo,[r(wt,{storeAppList:d(i),InstallAppList:d(p)},null,8,["storeAppList","InstallAppList"]),r(Wt,{StoreAppList:d(i),count:d(w)},null,8,["StoreAppList","count"]),r(Io)]))}},Zo=O($o,[["__scopeId","data-v-a561ebf8"]]);export{Zo as default};
