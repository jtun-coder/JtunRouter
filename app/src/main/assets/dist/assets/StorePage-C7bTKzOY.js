import{U as $e,n as Ce,I as _e,o as me,q as Ne,r as Le,t as De,u as se,v as Ve,w as Se,x as xe,y as Ae,z as Ue,B as Be,C as be,D as Fe,E as Ee,F as Te,G as Pe,H as Oe,J as Re,K as Me,L as je,M as He,N as ze,O as We,P as Ze,Q as qe,T as Ge,V as Je}from"./index-DIBALKnI.js";import{_ as j,f as Ye,D as ve,k as L,W as Ke,a4 as W,C as Y,F as Z,a as v,o as h,g as w,s as e,x as c,p,w as u,J as K,Y as Q,c as M,q as he,n as ge,y as x,S as N,Z as q,a8 as O,X,U as Qe,G as fe,v as Xe,$ as oe,a0 as ae,a6 as et,a9 as te,a3 as tt}from"./index-71Dg03wj.js";/* empty css                   */import{E as le}from"./el-dialog-DU3yAXWq.js";import"./el-overlay-B_18H0Zj.js";import{E as G}from"./el-button-DYa0b3jK.js";import{a as ne,E as ie}from"./el-col-CnxNQE2f.js";import{E}from"./index-D6xFVOzw.js";import{v as st}from"./directive-DR2KOWwX.js";import{E as de}from"./el-input-CWJQp_rg.js";import{E as pe}from"./el-switch-B6OhAxTy.js";import{E as ot}from"./el-checkbox-CldKO7nQ.js";import{E as at,a as lt}from"./el-card-B1UhkcPL.js";import"./request-CEcztA9E.js";import"./index-Dwdz3_fn.js";import"./index-Dm26XwlJ.js";import"./aria-BUADUvnR.js";import"./index-A3A6N4E7.js";import"./index-CyMJZHAX.js";import"./use-form-item-UjqXeot9.js";import"./constants-CUa6MTB8.js";import"./index-r5W6hzzQ.js";import"./typescript-Bp3YSIOJ.js";import"./index-GXqeLr1C.js";import"./isEqual-BAgbfzls.js";import"./castArray-Cn9hmAn-.js";const ke="/assets/submiting-B7ULOMtL.gif";function nt(a){return{all:a=a||new Map,on:function(n,m){var i=a.get(n);i?i.push(m):a.set(n,[m])},off:function(n,m){var i=a.get(n);i&&(m?i.splice(i.indexOf(m)>>>0,1):a.set(n,[]))},emit:function(n,m){var i=a.get(n);i&&i.slice().map(function(y){y(m)}),(i=a.get("*"))&&i.slice().map(function(y){y(n,m)})}}}const R=nt(),it={key:0,class:"Installed"},ct={class:"InstallList"},rt={class:"installedLength"},dt={class:"contentDataItem"},pt={class:"ContentTop"},ut={class:"LogoBlock"},_t=["src"],mt={class:"Version"},vt={class:"ItemDetail"},ht={class:"ItemNameBlock"},gt={class:"ItemName"},ft={class:"versionName"},kt={class:"versionInfo"},wt={class:"ContentBottom"},yt={class:"ButtonBlock"},It=["onClick"],$t=["onClick"],Ct=["onClick"],Nt=["onClick"],Lt={class:"InstallIng"},Dt=["src"],Vt={class:"stateTip"},St={key:1},xt={key:2,class:"installOver"},At={key:3,class:"installFailed"},Ut={__name:"InStalled",props:{InstallAppList:Array,storeAppList:Array},setup(a){let n=a;const m=()=>{},i=Ye(()=>n.InstallAppList.map(o=>{const d=n.storeAppList.find(C=>C.pkg===o.packageName);return{...o,icon:d?d.icon:o.icon}}));ve(()=>n.InstallAppList,o=>{console.log(o)},{immediate:!0,deep:!0});let y=L(!0),V=Ke();const $=W();let l=L(!1);const I=[{name:"Not DownLoaded"},{name:"DownLoading ..."},{name:"Download Completed"},{name:"Installing ..."},{name:"Install Completed"},{name:"Install Failed"}];let D=Y({status:1,statusTip:"Not DownLoaded",progress:0});const S=o=>{console.log(o),y.value=!1,V.setHandleTwoPathName(o.name),R.emit("isShow",y.value),R.emit("installItem",o)},b=async o=>{try{(await $e({password:$.token,packageName:o.packageName})).code==0&&setTimeout(()=>{O.go(0)},1e3)}catch(d){console.log(d)}},F=async o=>{try{const d=await Ce({packageName:o.packageName,password:$.token});d.code==0||console.error("Error: ",d.message||"未知错误")}catch(d){console.log(d)}finally{setTimeout(()=>{S(o)},2e3)}},B=async o=>{l.value=!0;try{(await _e({password:$.token,url:o.updateData.link,appInfo:{packageName:o.updateData.pkg,canonicalName:o.updateData.startup,versionCode:o.updateData.v,versionName:o.updateData.ver,name:o.updateData.app,brief:o.updateData.brief}})).code==0?s(o.updateData.pkg):(E({message:"Failed to install",type:"error",duration:2e3}),l.value=!1)}catch{l.value=!1,E({message:"Failed to install",type:"error",duration:2e3})}},s=async o=>{const d=setInterval(async()=>{try{let C=await me({password:$.token,packageName:o});C.code==0?(D.status=C.data.status,D.statusTip=I[C.data.status].name,D.progress=(C.data.progress/C.data.total).toFixed(2)*100,(C.data.status==4||C.data.status==5)&&clearInterval(d)):(clearInterval(d),l.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),O.go(0))}catch{clearInterval(d),l.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),O.go(0)}},800)},g=()=>{l.value=!1,O.go(0)};return Z(()=>{}),(o,d)=>{const C=ne,A=ie,t=G,r=le,k=st;return v(y)?(h(),w("div",it,[e("div",ct,[e("div",rt,c(o.$t("install.title")+"("+i.value.length+")"),1),p(A,{gutter:24,class:"contentData"},{default:u(()=>[(h(!0),w(K,null,Q(i.value,(f,P)=>(h(),M(C,{key:P,xs:24,sm:12,md:6,lg:6,xl:6},{default:u(()=>[he((h(),w("div",dt,[e("div",pt,[e("div",ut,[e("img",{class:"appIcon",src:f.icon,alt:""},null,8,_t),e("div",mt,c("V"+f.versionName),1)]),e("div",vt,[e("div",ht,[e("div",gt,c(f.name),1),e("div",{class:ge({ItemActive:!0,activeIcon:!!f.isRun})},null,2)]),e("div",ft,c(f.versionCode),1),e("div",kt,[e("span",null,c(f.brief),1)])])]),e("div",wt,[e("div",yt,[f.isRun?(h(),w("div",{key:0,class:"DetailButton",onClick:H=>S(f)},c(o.$t("install.view")),9,It)):(h(),w("div",{key:1,class:"open",onClick:H=>F(f)},c(o.$t("install.open")),9,$t)),f.update?(h(),w("div",{key:2,class:"Update",onClick:H=>B(f)},c(o.$t("install.update")),9,Ct)):x("",!0),f.isRun?x("",!0):(h(),w("div",{key:3,class:"uninstall",onClick:H=>b(f)},c(o.$t("install.Uninstall")),9,Nt))])])])),[[k,f.isLoading]])]),_:2},1024))),128))]),_:1})]),p(r,{modelValue:v(l),"onUpdate:modelValue":d[0]||(d[0]=f=>q(l)?l.value=f:l=f),"close-on-click-modal":!1,"before-close":m},{default:u(()=>[e("div",Lt,[v(D).status<4?(h(),w("img",{key:0,src:v(ke),alt:""},null,8,Dt)):x("",!0),e("div",Vt,c(v(D).statusTip),1),v(D).status==1?(h(),w("div",St,c(v(D).progress+"%"),1)):x("",!0),v(D).status==4?(h(),w("div",xt,[p(t,{type:"primary",onClick:g},{default:u(()=>[N("Ok")]),_:1})])):x("",!0),v(D).status==5?(h(),w("div",At,[p(t,{type:"danger",onClick:g},{default:u(()=>[N("Ok")]),_:1})])):x("",!0)])]),_:1},8,["modelValue"])])):x("",!0)}}},Bt=j(Ut,[["__scopeId","data-v-d8e142e4"]]),bt={key:0,class:"Uninstall"},Ft={class:"UNInstallList"},Et={class:"installedLength"},Tt={class:"contentDataItem"},Pt={class:"ContentTop"},Ot={class:"LogoBlock"},Rt=["src"],Mt={class:"Version"},jt={class:"ItemDetail"},Ht={class:"ItemNameBlock"},zt={class:"ItemName"},Wt={key:0,class:"Intalled"},Zt={class:"versionName"},qt={class:"versionInfo"},Gt={class:"ContentBottom"},Jt={class:"ButtonBlock"},Yt=["onClick"],Kt={class:"InstallIng"},Qt=["src"],Xt={class:"stateTip"},es={key:1},ts={key:2,class:"installOver"},ss={key:3,class:"installFailed"},os={__name:"NotInStall",props:{StoreAppList:Array,count:Number},setup(a){const{t:n}=X();let m=a;ve(()=>m.StoreAppList,s=>{console.log(s)},{immediate:!0,deep:!0});const i=Qe();let y=L(!0);const V=W(),$=[{name:"NotDownLoaded"},{name:"DownLoading"},{name:"downCompleted"},{name:"Installing"},{name:"InstallCompleted"},{name:"InstallFailed"}];let l=L(!1),I=Y({status:1,statusTip:"Not DownLoaded",progress:0});const D=()=>{},S=async s=>{l.value=!0;try{(await _e({password:V.token,url:s.link,appInfo:{packageName:s.pkg,canonicalName:s.startup,versionCode:s.v,versionName:s.ver,name:s.app,brief:s.brief}})).code==0?b(s.pkg):(E({message:"Failed to install",type:"error",duration:2e3}),l.value=!1)}catch{l.value=!1,E({message:"Failed to install",type:"error",duration:2e3})}},b=async s=>{const g=setInterval(async()=>{try{let o=await me({password:V.token,packageName:s});o.code==0?(I.status=o.data.status,I.statusTip=n("install."+$[o.data.status].name),I.progress=Math.round(o.data.progress/o.data.total*100),(o.data.status==4||o.data.status==5)&&clearInterval(g)):(clearInterval(g),l.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),i.go(0))}catch{clearInterval(g),l.value=!1,E({message:"Failed to get installation progress",type:"error",duration:2e3}),i.go(0)}},800)},F=s=>{y.value=s},B=()=>{l.value=!1,i.go(0)};return Z(()=>{R.on("isShow",F)}),fe(()=>{R.off("isShow",F)}),(s,g)=>{const o=ne,d=ie,C=G,A=le;return v(y)?(h(),w("div",bt,[e("div",Ft,[e("div",Et,c(s.$t("install.Appstore")+"("+v(m).count+")"),1),p(d,{gutter:24,class:"contentData"},{default:u(()=>[(h(!0),w(K,null,Q(v(m).StoreAppList,(t,r)=>(h(),M(o,{key:r,xs:24,sm:12,md:6,lg:6,xl:6},{default:u(()=>[e("div",Tt,[e("div",Pt,[e("div",Ot,[e("img",{class:"appIcon",src:t.icon,alt:""},null,8,Rt),e("div",Mt,c("V"+t.ver),1)]),e("div",jt,[e("div",Ht,[e("div",zt,c(t.app),1),t.install?(h(),w("div",Wt,c(s.$t("install.installed")),1)):x("",!0)]),e("div",Zt,c(t.v),1),e("div",qt,[e("span",null,c(t.brief),1)])])]),e("div",Gt,[e("div",Jt,[e("div",{class:"installation",onClick:k=>S(t)},c(s.$t("install.Installation")),9,Yt)])])])]),_:2},1024))),128))]),_:1})]),p(A,{modelValue:v(l),"onUpdate:modelValue":g[0]||(g[0]=t=>q(l)?l.value=t:l=t),"close-on-click-modal":!1,"before-close":D},{default:u(()=>[e("div",Kt,[v(I).status<4?(h(),w("img",{key:0,src:v(ke),alt:""},null,8,Qt)):x("",!0),e("div",Xt,c(v(I).statusTip),1),v(I).status==1?(h(),w("div",es,c(v(I).progress+"%"),1)):x("",!0),v(I).status==4?(h(),w("div",ts,[p(C,{type:"primary",onClick:B},{default:u(()=>[N("Ok")]),_:1})])):x("",!0),v(I).status==5?(h(),w("div",ss,[p(C,{type:"danger",onClick:B},{default:u(()=>[N("Ok")]),_:1})])):x("",!0)])]),_:1},8,["modelValue"])])):x("",!0)}}},as=j(os,[["__scopeId","data-v-2e749745"]]),T=a=>(oe("data-v-39baba85"),a=a(),ae(),a),ls={class:"UrlBlock"},ns={class:"LeftUrl"},is=T(()=>e("div",{class:"urlDetail"},[e("span",null,"Support Vless/Vmess/Trojan/Hysteria2/Socks5 link import.")],-1)),cs=T(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none"},[e("path",{d:"M12.5 22C18.0229 22 22.5 17.5229 22.5 12C22.5 6.47715 18.0229 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5229 6.97715 22 12.5 22Z",stroke:"#E12D2D","stroke-width":"2","stroke-linejoin":"round"}),e("path",{d:"M15.3284 9.17188L9.67151 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9.67163 9.17188L15.3285 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),rs={class:"SwitchBlock"},ds={class:"switch"},ps={class:"switchName"},us={class:"TurnON"},_s={class:"LeftSpan"},ms={class:"RightSpan"},vs={class:"TipBottom"},hs={key:0,class:"information"},gs=T(()=>e("div",{class:"switchName"},"Information",-1)),fs={class:"BodyBlock"},ks={class:"InformationItem"},ws=T(()=>e("div",{class:"ItemName"},"Remarks:",-1)),ys={class:"ItemValue"},Is={class:"InformationItem"},$s=T(()=>e("div",{class:"ItemName"},"Address:",-1)),Cs={class:"ItemValue"},Ns={class:"InformationItem"},Ls=T(()=>e("div",{class:"ItemName"},"Protocal:",-1)),Ds={class:"ItemValue"},Vs={class:"InformationItem"},Ss=T(()=>e("div",{class:"ItemName"},"Port:",-1)),xs={class:"ItemValue"},As={class:"InformationItem"},Us=T(()=>e("div",{class:"ItemName"},"IP Address:",-1)),Bs={class:"ItemValue"},bs={class:"InformationItem"},Fs=T(()=>e("div",{class:"ItemName"},"TCP Ping:",-1)),Es={class:"ItemValue"},Ts={class:"storeItem"},Ps=T(()=>e("div",{class:"storeItemTitle"},[e("div",{class:"storeItemName"},"Configuration")],-1)),Os={key:0,class:"storeItemDetail"},Rs=["onClick"],Ms={class:"selectTip"},js={class:"SelectName"},Hs={class:"severName"},zs={class:"serverPort"},Ws={key:1,class:"noStoreNode"},Zs=T(()=>e("p",null,"Please import your node connection",-1)),qs=[Zs],Gs={class:"ImportBlock"},Js=T(()=>e("div",{class:"ImportTitle"},"Import Sharing URL",-1)),Ys={class:"ImportForm"},Ks=T(()=>e("div",{class:"ImportFormUrl"},"URL",-1)),Qs={class:"dialog-footer"},Xs={__name:"V2rayPage",props:{packName:{type:String}},setup(a){const{t:n}=X(),m=W();let i=L(!1),y=L(""),V=L(),$=L(!1),l=L("");const I=a,D=Y([]);let S=L();const b=async t=>{if(t.guid!=S.value.guid)try{const r=await Ne({password:m.token,guid:t.guid});console.log(r),r.code==0&&setTimeout(()=>{g()},1e3)}catch(r){console.log(r)}},F=async t=>{try{(await Ae({password:m.token,guid:t.guid})).code==0&&setTimeout(()=>{g()},1e3)}catch(r){console.log(r)}},B=()=>{i.value=!0},s=async()=>{try{const t=await Le({password:m.token,config:y.value});console.log(t),t.code==0&&g()}catch(t){console.log(t)}i.value=!1},g=async()=>{const t=await De({password:m.token});console.log(t),V.value=t.data.isRunning,S.value=o(t.data.selected,t.data.list),D.splice(0,D.length,...t.data.list),console.log(D)},o=(t,r)=>{let k=r.findIndex(f=>f.guid==t);if(k!=-1)return r[k]},d=async()=>{try{const t=await se({packageName:I.packName,password:m.token});t.code==0?O.go(0):console.error("Error: ",t.message||"未知错误")}catch(t){console.log(t)}},C=async()=>{$.value=!0;try{let t;if(V.value){if(t=await Ve({password:m.token}),t.code==0)return g(),!0;throw new Error("Setting failed")}else{if(t=await Se({password:m.token}),t.code===0)return!0;throw new Error("Setting failed")}}catch(t){return console.error(t),!1}finally{$.value=!1}},A=async()=>{try{const t=await xe({password:m.token});t.code==0&&(l.value=t.data)}catch(t){console.log(t)}};return Z(()=>{g()}),(t,r)=>{const k=pe,f=ne,P=ie,H=G,J=de,ee=le;return h(),w("div",null,[e("div",ls,[e("div",ns,[e("div",{class:"UrlImport",onClick:B},c(v(n)("v2ray.tip1")),1),is]),e("div",{class:"RightUrl",onClick:d},[cs,N(" "+c(t.$t("install.CloseApp")),1)])]),e("div",rs,[e("div",ds,[e("div",ps,c(t.$t("install.Switch")),1),e("div",us,[e("div",_s,c(t.$t("install.onoroff")),1),e("div",ms,[p(k,{style:{"font-size":"22px"},modelValue:v(V),"onUpdate:modelValue":r[0]||(r[0]=_=>q(V)?V.value=_:V=_),"active-color":"#13ce66","inactive-color":"#ff4949",loading:v($),"before-change":()=>C()},null,8,["modelValue","loading","before-change"])])]),e("div",vs,c(v(n)("v2ray.tip2")),1)]),v(V)?(h(),w("div",hs,[e("div",{class:"TopBlock"},[gs,e("div",{class:"conNectTest",onClick:A},"Connectivity Test")]),e("div",fs,[p(P,{gutter:24},{default:u(()=>[p(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>{var _;return[e("div",ks,[ws,e("div",ys,c(((_=v(S))==null?void 0:_.profile.remarks)||""),1)])]}),_:1}),p(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>{var _;return[e("div",Is,[$s,e("div",Cs,c(((_=v(S))==null?void 0:_.profile.server)||""),1)])]}),_:1})]),_:1}),p(P,{gutter:24},{default:u(()=>[p(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>{var _;return[e("div",Ns,[Ls,e("div",Ds,c(((_=v(S))==null?void 0:_.profile.configType)||""),1)])]}),_:1}),p(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>{var _;return[e("div",Vs,[Ss,e("div",xs,c(((_=v(S))==null?void 0:_.profile.serverPort)||""),1)])]}),_:1})]),_:1}),p(P,{gutter:24},{default:u(()=>[p(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>{var _;return[e("div",As,[Us,e("div",Bs,c(((_=v(S))==null?void 0:_.profile.server)||""),1)])]}),_:1}),p(f,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[e("div",bs,[Fs,e("div",Es,c(v(l)==-1?"TimeOut":v(l)),1)])]),_:1})]),_:1})])])):x("",!0)]),e("div",Ts,[Ps,D.length>0?(h(),w("div",Os,[(h(!0),w(K,null,Q(D,(_,z)=>(h(),w("div",{key:z,onClick:Ie=>b(_),class:"storeItemLink"},[e("div",Ms,[e("div",{class:ge(["selectTipInside",{active:_.guid==v(S).guid}])},null,2)]),e("div",js,[e("div",Hs,c(_.profile.server),1),e("div",zs,c("severPort:"+_.profile.serverPort),1)]),p(H,{class:"DeleteButton",disabled:_.guid===v(S).guid,onClick:Xe(Ie=>F(_),["stop"])},{default:u(()=>[N("Delete")]),_:2},1032,["disabled","onClick"])],8,Rs))),128))])):(h(),w("div",Ws,qs))]),p(ee,{class:"ImportDialog",modelValue:v(i),"onUpdate:modelValue":r[4]||(r[4]=_=>q(i)?i.value=_:i=_),"destroy-on-close":"",center:""},{footer:u(()=>[e("div",Qs,[e("div",{class:"cancelButton",onClick:r[2]||(r[2]=_=>q(i)?i.value=!1:i=!1)},"Cancel"),e("div",{class:"ImportButton",onClick:r[3]||(r[3]=_=>s())},"Import")])]),default:u(()=>[e("div",Gs,[Js,e("div",Ys,[Ks,p(J,{class:"ImportFormInput",type:"text",placeholder:"请输入内容",modelValue:v(y),"onUpdate:modelValue":r[1]||(r[1]=_=>q(y)?y.value=_:y=_)},null,8,["modelValue"])])])]),_:1},8,["modelValue"])])}}},eo=j(Xs,[["__scopeId","data-v-39baba85"]]),we=a=>(oe("data-v-7e6a77e2"),a=a(),ae(),a),to={class:"UrlBlock"},so=we(()=>e("div",{class:"LeftUrl"},null,-1)),oo=we(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none"},[e("path",{d:"M12.5 22C18.0229 22 22.5 17.5229 22.5 12C22.5 6.47715 18.0229 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5229 6.97715 22 12.5 22Z",stroke:"#E12D2D","stroke-width":"2","stroke-linejoin":"round"}),e("path",{d:"M15.3284 9.17188L9.67151 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9.67163 9.17188L15.3285 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ao={class:"SwitchBlock"},lo={class:"switch"},no={class:"switchName"},io={class:"TurnON"},co={class:"LeftSpan"},ro={class:"RightSpan"},po={class:"TipBottom"},uo={key:0,style:{width:"100%",height:"50px","margin-top":"30px"}},_o={style:{width:"100%",height:"100%","margin-top":"20px"}},mo={__name:"AListLite",props:{packName:{type:String}},setup(a){const{t:n}=X(),m=W(),i=L(null),y=L(!1),V=a,$=L("");let l=L(!1);const I=L(),D=async()=>{try{const d=await Ue({password:m.token});d.code==0&&(I.value=d.data)}catch(d){console.log(d)}},S=window.location.port;let b="";S=="2000"?b=`${window.location.hostname+":5244"}`:S=="8080"&&(b=`${window.location.hostname.replace(/^(.*?)(\..*)$/,"$1-alist$2")+":8080"}`),console.log(b);const F="http://"+b,B=async()=>{try{const d=await Be({password:m.token,adminPass:$.value});console.log(d),d.code==0&&(y.value=!1,E.success(n("AListLite.passsuc")))}catch(d){console.log(d)}},s=()=>{i.value&&i.value.contentWindow&&i.value.contentWindow.document.querySelectorAll(".hope-c-PJLV-iekLzst-css").forEach(A=>{A.style.display="none"})},g=async()=>{console.log(V.packName);try{const d=await se({packageName:V.packName,password:m.token});d.code==0?O.go(0):console.error("Error: ",d.message||"未知错误")}catch(d){console.log(d)}},o=async()=>{l.value=!0;try{let d;if(I.value){if(d=await be({password:m.token}),d.code==0)return D(),!0;throw new Error("Setting failed")}else{if(d=await Fe({password:m.token}),d.code===0)return D(),!0;throw new Error("Setting failed")}}catch(d){return console.error(d),!1}finally{l.value=!1}};return Z(()=>{D(),i.value&&i.value.contentWindow&&s()}),(d,C)=>{const A=pe,t=G,r=de,k=le;return h(),w("div",null,[e("div",to,[so,e("div",{class:"RightUrl",onClick:g},[oo,N(" "+c(d.$t("install.CloseApp")),1)])]),e("div",ao,[e("div",lo,[e("div",no,c(d.$t("install.Switch")),1),e("div",io,[e("div",co,c(d.$t("install.onoroff")),1),e("div",ro,[p(A,{style:{"font-size":"22px"},modelValue:I.value,"onUpdate:modelValue":C[0]||(C[0]=f=>I.value=f),"active-color":"#13ce66","inactive-color":"#ff4949",loading:v(l),"before-change":()=>o()},null,8,["modelValue","loading","before-change"])])]),e("div",po,c(v(n)("AListLite.tip1")),1)])]),I.value?(h(),w("div",uo,[p(t,{type:"primary",style:{height:"56px","font-size":"24px"},onClick:C[1]||(C[1]=f=>y.value=!0)},{default:u(()=>[N(c(v(n)("AListLite.pass")),1)]),_:1})])):x("",!0),e("div",_o,[e("iframe",{ref_key:"myIframe",ref:i,style:{width:"100%",height:"500px","border-radius":"12px"},src:F,frameborder:"0"},null,512)]),p(k,{modelValue:y.value,"onUpdate:modelValue":C[3]||(C[3]=f=>y.value=f),style:{"border-radius":"10px",height:"200px"},width:"500"},{default:u(()=>[e("h2",null,c(v(n)("AListLite.pass")),1),p(r,{type:"password",style:{height:"48px"},modelValue:$.value,"onUpdate:modelValue":C[2]||(C[2]=f=>$.value=f),placeholder:"New Password"},null,8,["modelValue"]),p(t,{type:"primary",style:{"margin-top":"10px"},onClick:B},{default:u(()=>[N("确定")]),_:1})]),_:1},8,["modelValue"])])}}},vo=j(mo,[["__scopeId","data-v-7e6a77e2"]]),ye=a=>(oe("data-v-0af39c25"),a=a(),ae(),a),ho={class:"UrlBlock"},go=ye(()=>e("div",{class:"LeftUrl"},[e("div",{class:"urlDetail"},[e("span")])],-1)),fo=ye(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none"},[e("path",{d:"M12.5 22C18.0229 22 22.5 17.5229 22.5 12C22.5 6.47715 18.0229 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5229 6.97715 22 12.5 22Z",stroke:"#E12D2D","stroke-width":"2","stroke-linejoin":"round"}),e("path",{d:"M15.3284 9.17188L9.67151 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9.67163 9.17188L15.3285 14.8287",stroke:"#E12D2D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ko={class:"SwitchBlock"},wo={class:"switch"},yo={class:"switchName"},Io={class:"TurnON"},$o={class:"SwitchBlock"},Co={class:"switch"},No={class:"switchName"},Lo={class:"upload"},Do={class:"Importconfig"},Vo={class:"UpFile"},So={__name:"OpenVpn",props:{packName:{type:String}},setup(a){X();const n=W(),m=L(""),i=L(""),y=a,V=()=>{document.getElementById("fileInput").click()},$=Y([]),l=async()=>{try{const s=await Ee({password:n.token});s.code==0&&$.splice(0,$.length,...s.data)}catch(s){console.log(s)}},I=s=>{const g=s.target.files[0];if(console.log(g),g){i.value=g.name;const o=new FileReader;o.onloadend=()=>{m.value=o.result.split(",")[1],console.log(m.value)},o.readAsDataURL(g)}},D=async()=>{if(m.value)try{(await Te({password:n.token,config:m.value,name:i.value})).code==0&&(i.value="",m.value="",l())}catch(s){console.log(s)}},S=async s=>{try{(await Pe({password:n.token,uuid:s})).code==0&&setTimeout(()=>{l()},1600)}catch(g){console.log(g)}},b=async s=>{try{(await Oe({password:n.token,uuid:s})).code==0&&setTimeout(()=>{l()},1600)}catch(g){console.log(g)}},F=async()=>{try{const s=await se({packageName:y.packName,password:n.token});s.code==0?O.go(0):console.error("Error: ",s.message||"未知错误")}catch(s){console.log(s)}},B=async s=>{try{(await Re({password:n.token,uuid:s})).code==0&&setTimeout(()=>{l()},1600)}catch(g){console.log(g)}};return Z(()=>{l()}),(s,g)=>{const o=ne,d=ie,C=ot,A=G;return h(),w("div",null,[e("div",ho,[go,e("div",{class:"RightUrl",onClick:F},[fo,N(" "+c(s.$t("install.CloseApp")),1)])]),e("div",ko,[e("div",wo,[e("div",yo,c(s.$t("install.openvpninstance")),1),e("div",Io,[p(d,{gutter:0,style:{width:"100%"},class:"TurnHead"},{default:u(()=>[p(o,{xs:4,sm:4,md:4,lg:4,xl:4},{default:u(()=>[N(c(s.$t("install.name")),1)]),_:1}),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[N(c(s.$t("install.enabled")),1)]),_:1}),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[N(c(s.$t("install.started")),1)]),_:1}),p(o,{xs:4,sm:4,md:4,lg:4,xl:4},{default:u(()=>[N(c(s.$t("install.startorstop")),1)]),_:1}),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[N(c(s.$t("install.port")),1)]),_:1}),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[N(c(s.$t("install.ProtocolName")),1)]),_:1}),p(o,{xs:4,sm:4,md:4,lg:4,xl:4},{default:u(()=>[N("    "+c(s.$t("install.actions")),1)]),_:1})]),_:1}),(h(!0),w(K,null,Q($,(t,r)=>(h(),M(d,{gutter:0,key:r,class:"TurnItem"},{default:u(()=>[p(o,{xs:4,sm:4,md:4,lg:4,xl:4,class:"spanName"},{default:u(()=>[N(c(t.name),1)]),_:2},1024),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[p(C,{modelValue:t.servers[0].enabled,"onUpdate:modelValue":k=>t.servers[0].enabled=k,size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[N(c(t.active==!0?"Yes":"No"),1)]),_:2},1024),p(o,{xs:4,sm:4,md:4,lg:4,xl:4},{default:u(()=>[t.active==!1?(h(),M(A,{key:0,class:"StartButton",onClick:g[0]||(g[0]=k=>S(s.itqem.uuid))},{default:u(()=>[N("Start")]),_:1})):(h(),M(A,{key:1,class:"StopButton",onClick:k=>b(t.uuid)},{default:u(()=>[N("Stop")]),_:2},1032,["onClick"]))]),_:2},1024),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[N(c(t.servers[0].port),1)]),_:2},1024),p(o,{xs:3,sm:3,md:3,lg:3,xl:3},{default:u(()=>[N(c(t.servers[0].useUdp==!0?"UDP":"-"),1)]),_:2},1024),p(o,{xs:4,sm:4,md:4,lg:4,xl:4},{default:u(()=>[p(A,{disabled:t.active,class:"DeleteButton",onClick:k=>B(t.uuid)},{default:u(()=>[N("Delete")]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])])]),e("div",$o,[e("div",Co,[e("div",No,c(s.$t("install.uploadfile")),1),e("div",Lo,[e("input",{style:{display:"none"},type:"file",id:"fileInput",onChange:I,accept:".ovpn"},null,32),e("div",Do,[he(e("input",{type:"text",disabled:"",class:"configName","onUpdate:modelValue":g[1]||(g[1]=t=>i.value=t)},null,512),[[et,i.value]]),p(A,{class:"ImportConfigButton",onClick:V},{default:u(()=>[N(c(s.$t("install.SelectFileupload")),1)]),_:1})]),e("div",Vo,[p(A,{class:"UploadButton",onClick:g[2]||(g[2]=t=>D())},{default:u(()=>[N(c(s.$t("install.uploadfiles")),1)]),_:1})])])])])])}}},xo=j(So,[["__scopeId","data-v-0af39c25"]]),U=[];for(let a=0;a<256;++a)U.push((a+256).toString(16).slice(1));function Ao(a,n=0){return(U[a[n+0]]+U[a[n+1]]+U[a[n+2]]+U[a[n+3]]+"-"+U[a[n+4]]+U[a[n+5]]+"-"+U[a[n+6]]+U[a[n+7]]+"-"+U[a[n+8]]+U[a[n+9]]+"-"+U[a[n+10]]+U[a[n+11]]+U[a[n+12]]+U[a[n+13]]+U[a[n+14]]+U[a[n+15]]).toLowerCase()}let re;const Uo=new Uint8Array(16);function Bo(){if(!re){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");re=crypto.getRandomValues.bind(crypto)}return re(Uo)}const bo=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ue={randomUUID:bo};function Fo(a,n,m){if(ue.randomUUID&&!n&&!a)return ue.randomUUID();a=a||{};const i=a.random||(a.rng||Bo)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Ao(i)}const ce=a=>(oe("data-v-cda70811"),a=a(),ae(),a),Eo={class:"UrlBlock"},To=ce(()=>e("div",{class:"LeftUrl"},[e("div",{class:"urlDetail"},[e("span")])],-1)),Po=ce(()=>e("svg",{fill:"none",height:"24",viewBox:"0 0 25 24",width:"25",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12.5 22C18.0229 22 22.5 17.5229 22.5 12C22.5 6.47715 18.0229 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5229 6.97715 22 12.5 22Z",stroke:"#E12D2D","stroke-linejoin":"round","stroke-width":"2"}),e("path",{d:"M15.3284 9.17188L9.67151 14.8287",stroke:"#E12D2D","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("path",{d:"M9.67163 9.17188L15.3285 14.8287",stroke:"#E12D2D","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1)),Oo={class:"SwitchBlock"},Ro={class:"switch"},Mo={class:"switchName"},jo={class:"TurnON"},Ho={class:"title"},zo={style:{display:"flex","flex-wrap":"wrap","justify-content":"space-between"}},Wo=["onClick"],Zo=["onClick"],qo=["onClick"],Go=["onClick"],Jo={key:0,class:"maskBox"},Yo={class:"maskContent"},Ko={class:"maskTitle"},Qo=ce(()=>e("path",{d:"M4 4L20 20",stroke:"#333333","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1)),Xo=ce(()=>e("path",{d:"M4 20L20 4",stroke:"#333333","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1)),ea=[Qo,Xo],ta={class:"UpFile"},sa={class:"btnBox"},oa={__name:"Frpc",props:{packName:{type:String}},setup(a){X();const n=W(),m=a,i=L(""),y=L("新增"),V=L(!1),$=L(""),l=L(!1),I=()=>{A(),y.value="新增",$.value="",V.value=!0},D=async r=>{y.value="编辑";const k=await Me({password:n.token,uid:r});if(k.code==0){const{data:f}=k;i.value=f.uid,l.value=f.connecting,$.value=f.name,s.value=f.cfg,V.value=!0}else E.error(k.message)},S=()=>{y.value=" ",$.value="",V.value=!1},b=()=>{S()},F=Y([]),B=async()=>{try{const r=await je({password:n.token});r.code==0?F.splice(0,F.length,...r.data):E.error(r.message)}catch(r){console.log(r)}},s=L(""),g=async()=>{try{i.value==""&&(i.value=Fo());let r;y.value=="编辑"?r=await He({config:{uid:i.value,name:$.value,cfg:s.value,connecting:l.value},password:n.token}):r=await ze({config:{uid:i.value,name:$.value,cfg:s.value,connecting:l.value},password:n.token}),r.code==0?($.value="",s.value="",l.value=!1,S(),B()):E.error(r.message)}catch(r){console.log(r)}},o=async r=>{try{const k=await We({password:n.token,uid:r});k.code==0?setTimeout(()=>{B()},1600):E.error(k.message)}catch(k){console.log(k)}},d=async r=>{try{const k=await Ze({password:n.token,uid:r});k.code==0?setTimeout(()=>{B()},1600):E.error(k.message)}catch(k){console.log(k)}},C=async()=>{try{const r=await se({packageName:m.packName,password:n.token});r.code==0?O.go(0):console.error("Error: ",r.message||"未知错误")}catch(r){console.log(r)}},A=()=>{s.value=`[common]
server_addr = server address
server_port = 7000

[adb]
type = tcp
local_ip = 127.0.0.1
local_port = 5555
remote_port = 5555

[screen]
type = tcp
local_ip = 127.0.0.1
local_port = 7007
remote_port = 5556`};A();const t=async r=>{try{(await qe({password:n.token,uid:r})).code==0&&setTimeout(()=>{B()},1600)}catch(k){console.log(k)}};return Z(()=>{B()}),(r,k)=>{const f=G,P=pe,H=at,J=lt,ee=de;return h(),w("div",null,[e("div",Eo,[To,e("div",{class:"RightUrl",onClick:C},[Po,N(" "+c(r.$t("install.CloseApp")),1)])]),e("div",Oo,[e("div",Ro,[e("div",Mo,[N(" Frpc实例 "),p(f,{class:"UploadButton",type:"primary",onClick:I},{default:u(()=>[N("新增")]),_:1})]),e("div",jo,[(h(!0),w(K,null,Q(F,_=>(h(),M(H,{class:"box-card",key:_.uid},{default:u(()=>[e("div",Ho,[e("span",null,c(_.name),1),p(P,{modelValue:_.connecting,"onUpdate:modelValue":z=>_.connecting=z,style:{"margin-right":"13px"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),e("div",zo,[e("div",{class:"DeleteButton",onClick:z=>t(_.uid)},"删除 ",8,Wo),e("div",{class:"DeleteButton edit",onClick:z=>D(_.uid)},"编辑 ",8,Zo),_.connecting==!0?(h(),w("div",{key:0,class:"DeleteButton",onClick:z=>d(_.uid)},"关闭 ",8,qo)):x("",!0),_.connecting==!1?(h(),w("div",{key:1,class:"DeleteButton edit",onClick:z=>o(_.uid)},"开启 ",8,Go)):x("",!0)])]),_:2},1024))),128))])])]),V.value?(h(),w("div",Jo,[e("div",Yo,[e("div",Ko,[e("span",null,c(y.value),1),(h(),w("svg",{fill:"none",height:"16",viewBox:"0 0 24 24",width:"16",xmlns:"http://www.w3.org/2000/svg",onClick:b},ea))]),e("div",ta,[p(J,{label:"连接状态"},{default:u(()=>[p(P,{modelValue:l.value,"onUpdate:modelValue":k[0]||(k[0]=_=>l.value=_),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]),_:1}),p(J,{label:"frpc名称"},{default:u(()=>[p(ee,{modelValue:$.value,"onUpdate:modelValue":k[1]||(k[1]=_=>$.value=_),placeholder:"请输入内容",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),s.value?(h(),M(J,{key:0,label:"frpc配置"},{default:u(()=>[p(ee,{modelValue:s.value,"onUpdate:modelValue":k[2]||(k[2]=_=>s.value=_),rows:20,placeholder:"请输入内容",style:{width:"100%"},type:"textarea"},null,8,["modelValue"])]),_:1})):x("",!0)]),e("div",sa,[p(f,{class:"UploadButton",type:"primary",onClick:g},{default:u(()=>[N(c(y.value),1)]),_:1})])])])):x("",!0)])}}},aa=j(oa,[["__scopeId","data-v-cda70811"]]),la={key:0,class:"storeItem"},na={key:1},ia={__name:"InstallDetaIl",setup(a){const n=L(null);let m=L(!0);const i=l=>{n.value=l,$.value=V[l.name]},y=l=>{m.value=l},V={v2rayNG:te(eo),AListLite:te(vo),OpenVPN:te(xo),Frpc:te(aa)};let $=L();return Z(()=>{R.on("isShow",y),R.on("installItem",i)}),fe(()=>{R.off("isShow",y),R.off("installItem",i)}),(l,I)=>v(m)?x("",!0):(h(),w("div",la,[e("div",null,[n.value?(h(),M(tt(v($)),{key:0,packName:n.value.packageName},null,8,["packName"])):(h(),w("p",na,"请等待安装项加载..."))])]))}},ca=j(ia,[["__scopeId","data-v-dfb9bf66"]]),ra={class:"storePage"},da={__name:"StorePage",setup(a){const n=W();let m=L([]),i=L([]),y=L(0);const V=async()=>{try{const l=await Ge({password:n.token});if(l.code==0)m.value=l.data;else{console.error("Failed to fetch installed app list with code:",l.code);return}const I=await Je();if(I.data.code==0)i.value=I.data.rows,y.value=I.data.count;else{console.error("Failed to fetch store app list with code:",I.data.code);return}$()}catch(l){console.error("Error fetching app lists:",l)}},$=()=>{m.value.forEach(l=>{const I=i.value.find(D=>D.pkg===l.packageName);I&&I.v>l.versionCode?(l.update=!0,l.updateData=I):l.update=!1}),i.value.forEach(l=>{l.install=m.value.some(I=>I.packageName===l.pkg)})};return V(),(l,I)=>(h(),w("div",ra,[p(Bt,{storeAppList:v(i),InstallAppList:v(m)},null,8,["storeAppList","InstallAppList"]),p(as,{StoreAppList:v(i),count:v(y)},null,8,["StoreAppList","count"]),p(ca)]))}},Ta=j(da,[["__scopeId","data-v-341ad370"]]);export{Ta as default};
